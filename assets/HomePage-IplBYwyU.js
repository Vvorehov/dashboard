import{_ as C,d as E,e as b,c as m,a as u,o as i,w as t,b as l,f as k,g as x,t as g,h as o,r as c,i as P,j as w,u as v,F as B,k as L,l as N,m as V,E as $,n as M}from"./index-DlvedrGh.js";const T={name:"ProjectCard",components:{Edit:b,Delete:E},props:{project:{type:Object,required:!0}},emits:["delete"],setup(e,{emit:s}){const r=v(),n=m(()=>e.project.description?e.project.description.length>100?e.project.description.substring(0,100)+"...":e.project.description:""),d=m(()=>{const a=e.project.tasks?e.project.tasks.length:0;return`${a} ${a===1?"task":"tasks"}`});return{truncatedDescription:n,taskCountLabel:d,handleEdit:()=>{r.push({name:"EditProject",params:{id:e.project.id}})},handleDelete:()=>{s("delete",e.project)}}}},z={class:"card-header"},F={class:"project-name"},H={class:"card-actions"},I={key:0,class:"project-description"},S={class:"project-details"},q={class:"task-count"},A={class:"card-footer"};function O(e,s,r,n,d,y){const _=c("Delete"),a=c("el-icon"),p=c("el-button"),j=c("Edit"),f=c("router-link"),h=c("el-card");return i(),u(h,{class:"project-card"},{default:t(()=>[l("div",z,[l("h3",F,g(r.project.name),1),l("div",H,[o(p,{size:"small",type:"danger",circle:"",onClick:P(n.handleDelete,["stop"])},{default:t(()=>[o(a,null,{default:t(()=>[o(_)]),_:1})]),_:1},8,["onClick"]),o(p,{size:"small",type:"primary",circle:"",onClick:P(n.handleEdit,["stop"])},{default:t(()=>[o(a,null,{default:t(()=>[o(j)]),_:1})]),_:1},8,["onClick"])])]),r.project.description?(i(),k("p",I,g(n.truncatedDescription),1)):x("",!0),l("div",S,[l("div",q,[l("span",null,g(n.taskCountLabel),1)])]),l("div",A,[o(f,{to:`/projects/${r.project.id}`},{default:t(()=>[o(p,{type:"primary",plain:""},{default:t(()=>s[0]||(s[0]=[w("View Details")])),_:1})]),_:1},8,["to"])])]),_:1})}const R=C(T,[["render",O],["__scopeId","data-v-d8f0e4c7"]]),W={name:"HomePage",components:{ProjectCard:R},setup(){const e=N(),s=m(()=>e.getters["projects/allProjects"]),r=m(()=>e.getters["projects/isLoading"]);return V(()=>{e.dispatch("projects/fetchProjects")}),{projects:s,isLoading:r,confirmDeleteProject:d=>{$.confirm(`Are you sure you want to delete project "${d.name}"?`,"Warning",{confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel",type:"warning"}).then(()=>{e.dispatch("projects/deleteProject",d.id).then(()=>{M({message:`Project "${d.name}" has been deleted.`,type:"success"})})}).catch(()=>{})}}}},Y={class:"home-container"};function G(e,s,r,n,d,y){const _=c("el-col"),a=c("el-row"),p=c("el-button"),j=c("router-link"),f=c("el-empty"),h=c("project-card");return i(),k("div",Y,[o(a,null,{default:t(()=>[o(_,{span:24},{default:t(()=>s[0]||(s[0]=[l("h1",{class:"page-title"},"Projects",-1)])),_:1})]),_:1}),!n.isLoading&&n.projects.length===0?(i(),u(f,{key:0,description:"No projects found"},{default:t(()=>[o(j,{to:"/projects/new"},{default:t(()=>[o(p,{type:"primary"},{default:t(()=>s[1]||(s[1]=[w("Create New Project")])),_:1})]),_:1})]),_:1})):(i(),u(a,{key:1,gutter:20},{default:t(()=>[(i(!0),k(B,null,L(n.projects,D=>(i(),u(_,{key:D.id,xs:24,sm:12,md:8,lg:6,class:"project-card-wrapper"},{default:t(()=>[o(h,{project:D,onDelete:n.confirmDeleteProject},null,8,["project","onDelete"])]),_:2},1024))),128))]),_:1}))])}const K=C(W,[["render",G],["__scopeId","data-v-8e5ca6c5"]]);export{K as default};
