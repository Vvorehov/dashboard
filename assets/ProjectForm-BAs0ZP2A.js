import{_ as P,f as y,o as v,h as t,w as r,r as n,b as w,t as h,i as x,j as b,p as E,c as D,m as V,l as C,E as F,u as S,n as _}from"./index-XQDU_QM-.js";import{u as k}from"./useForm-CXZB2R5j.js";const B={name:"ProjectForm",props:{id:{type:String,default:null}},setup(l){const o=C(),c=S(),e=E(null),m=D(()=>!!l.id),j={name:"",description:""},p={name:[{required:!0,message:"Please enter a project name",trigger:"blur"},{min:2,max:100,message:"Length should be 2 to 100 characters",trigger:"blur"}],description:[{max:500,message:"Description cannot exceed 500 characters",trigger:"blur"}]},{formData:a,isSubmitting:u,errors:i}=k(j);return V(async()=>{if(m.value){await o.dispatch("projects/fetchProjects");const s=o.getters["projects/allProjects"].find(d=>d.id===l.id);s?(a.name=s.name||"",a.description=s.description||""):F.alert("Project not found.","Error",{confirmButtonText:"OK",callback:()=>{c.push({name:"Home"})}})}}),{formData:a,isEditing:m,isSubmitting:u,errors:i,rules:p,projForm:e,save:async()=>{e.value&&e.value.validate(async s=>{if(s)try{if(m.value)await o.dispatch("projects/updateProject",{id:l.id,name:a.name,description:a.description}),_({message:"Project updated successfully",type:"success"}),c.push({name:"ProjectDetail",params:{id:l.id}});else{const d=await o.dispatch("projects/addProject",{name:a.name,description:a.description});_({message:"Project created successfully",type:"success"}),c.push({name:"ProjectDetail",params:{id:d.id}})}}catch(d){console.error("Error saving project:",d),_({message:"Failed to save project",type:"error"})}})},cancel:()=>{c.back()}}}},N={class:"proj-form"},M={class:"title"};function U(l,o,c,e,m,j){const p=n("el-col"),a=n("el-row"),u=n("el-input"),i=n("el-form-item"),f=n("el-button"),g=n("el-form");return v(),y("div",N,[t(a,null,{default:r(()=>[t(p,{span:24},{default:r(()=>[w("h1",M,h(e.isEditing?"Edit Project":"Create New Project"),1)]),_:1})]),_:1}),t(a,null,{default:r(()=>[t(p,{xs:24,sm:20,md:16,lg:12},{default:r(()=>[t(g,{model:e.formData,rules:e.rules,ref:"projForm","label-position":"top",onSubmit:x(e.save,["prevent"])},{default:r(()=>[t(i,{label:"Project Name",prop:"name"},{default:r(()=>[t(u,{modelValue:e.formData.name,"onUpdate:modelValue":o[0]||(o[0]=s=>e.formData.name=s),placeholder:"Enter project name",maxlength:"100","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(i,{label:"Description",prop:"description"},{default:r(()=>[t(u,{modelValue:e.formData.description,"onUpdate:modelValue":o[1]||(o[1]=s=>e.formData.description=s),type:"textarea",rows:4,placeholder:"Enter project description",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),t(i,null,{default:r(()=>[t(f,{type:"primary","native-type":"submit",loading:e.isSubmitting},{default:r(()=>[b(h(e.isEditing?"Update Project":"Create Project"),1)]),_:1},8,["loading"]),t(f,{onClick:e.cancel,plain:""},{default:r(()=>o[2]||(o[2]=[b("Cancel")])),_:1},8,["onClick"])]),_:1})]),_:1},8,["model","rules","onSubmit"])]),_:1})]),_:1})])}const H=P(B,[["render",U],["__scopeId","data-v-5464cdb1"]]);export{H as default};
