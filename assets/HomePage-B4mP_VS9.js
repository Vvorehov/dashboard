import{_ as P,d as B,e as L,c as g,a as m,o as l,w as t,b as r,f,g as N,t as x,h as e,r as n,i as D,j as b,u as $,F as w,k as v,l as V,m as M,E as T,n as z}from"./index-XQDU_QM-.js";const F={name:"ProjectCard",components:{Edit:L,Delete:B},props:{project:{type:Object,required:!0}},emits:["delete"],setup(o,{emit:c}){const i=$(),s=g(()=>o.project.description?o.project.description.length>100?o.project.description.substring(0,100)+"...":o.project.description:""),d=g(()=>{const a=o.project.tasks?o.project.tasks.length:0;return`${a} ${a===1?"task":"tasks"}`});return{truncatedDescription:s,taskCountLabel:d,handleEdit:()=>{i.push({name:"EditProject",params:{id:o.project.id}})},handleDelete:()=>{c("delete",o.project)}}}},H={class:"card-header"},I={class:"project-name"},S={class:"card-actions"},q={key:0,class:"project-description"},A={class:"project-details"},O={class:"task-count"},R={class:"card-footer"};function W(o,c,i,s,d,j){const _=n("Delete"),a=n("el-icon"),u=n("el-button"),k=n("Edit"),y=n("router-link"),p=n("el-card");return l(),m(p,{class:"project-card"},{default:t(()=>[r("div",H,[r("h3",I,x(i.project.name),1),r("div",S,[e(u,{size:"small",type:"danger",circle:"",onClick:D(s.handleDelete,["stop"])},{default:t(()=>[e(a,null,{default:t(()=>[e(_)]),_:1})]),_:1},8,["onClick"]),e(u,{size:"small",type:"primary",circle:"",onClick:D(s.handleEdit,["stop"])},{default:t(()=>[e(a,null,{default:t(()=>[e(k)]),_:1})]),_:1},8,["onClick"])])]),i.project.description?(l(),f("p",q,x(s.truncatedDescription),1)):N("",!0),r("div",A,[r("div",O,[r("span",null,x(s.taskCountLabel),1)])]),r("div",R,[e(y,{to:`/projects/${i.project.id}`},{default:t(()=>[e(u,{type:"primary",plain:""},{default:t(()=>c[0]||(c[0]=[b("View Details")])),_:1})]),_:1},8,["to"])])]),_:1})}const Y=P(F,[["render",W],["__scopeId","data-v-3b17e77c"]]),G={name:"HomePage",components:{ProjectCard:Y},setup(){const o=V(),c=g(()=>o.getters["projects/allProjects"]),i=g(()=>o.getters["projects/isLoading"]);return M(()=>{o.dispatch("projects/fetchProjects")}),{projects:c,isLoading:i,confirmDeleteProject:d=>{T.confirm(`Are you sure you want to delete project "${d.name}"?`,"Warning",{confirmButtonText:"Yes, Delete",cancelButtonText:"Cancel",type:"warning"}).then(()=>{o.dispatch("projects/optimisticDeleteProject",d.id).then(j=>{j&&z({message:`Project "${d.name}" has been deleted.`,type:"success"})})}).catch(()=>{})}}}},J={class:"home-container"},K={class:"project-skeleton"},Q={style:{"text-align":"center","margin-top":"20px"}};function U(o,c,i,s,d,j){const _=n("el-col"),a=n("el-row"),u=n("el-button"),k=n("router-link"),y=n("el-empty"),p=n("el-skeleton-item"),C=n("el-skeleton"),E=n("project-card");return l(),f("div",J,[e(a,null,{default:t(()=>[e(_,{span:24},{default:t(()=>c[0]||(c[0]=[r("h1",{class:"page-title"},"Projects",-1)])),_:1})]),_:1}),!s.isLoading&&s.projects.length===0?(l(),m(y,{key:0,description:"No projects found"},{default:t(()=>[e(k,{to:"/projects/new"},{default:t(()=>[e(u,{type:"primary"},{default:t(()=>c[1]||(c[1]=[b("Create New Project")])),_:1})]),_:1})]),_:1})):s.isLoading?(l(),m(a,{key:1,gutter:20},{default:t(()=>[(l(),f(w,null,v(4,h=>e(_,{key:h,xs:24,sm:12,md:8,lg:6,class:"project-card-wrapper"},{default:t(()=>[e(C,{animated:"",throttle:500},{template:t(()=>[r("div",K,[e(p,{variant:"text",style:{width:"80%",height:"25px","margin-bottom":"15px"}}),e(p,{variant:"p",style:{width:"100%",height:"80px"}}),e(p,{variant:"text",style:{width:"50%","margin-top":"15px"}}),r("div",Q,[e(p,{variant:"button",style:{width:"120px",height:"36px"}})])])]),_:1})]),_:2},1024)),64))]),_:1})):(l(),m(a,{key:2,gutter:20},{default:t(()=>[(l(!0),f(w,null,v(s.projects,h=>(l(),m(_,{key:h.id,xs:24,sm:12,md:8,lg:6,class:"project-card-wrapper"},{default:t(()=>[e(E,{project:h,onDelete:s.confirmDeleteProject},null,8,["project","onDelete"])]),_:2},1024))),128))]),_:1}))])}const Z=P(G,[["render",U],["__scopeId","data-v-fd069978"]]);export{Z as default};
